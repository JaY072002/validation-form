<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>userData</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css">
    <style>
        table {
            text-align: center;
            width: 100%;
        }
    </style>

    <!-- <script src="https://kit.fontawesome.com/e3f880f1b5.js" crossorigin="anonymous"></script> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
        integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>


<body>
    <table class="table table-striped table-dark">
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email ID</th>
                <th>Date Of Birth</th>
                <th>Mobile</th>
                <th>Created At</th>
                <th>Time Of Creation</th>
                <th>delete</th>
            </tr>
        </thead>
        <tbody id="dataBody">

        </tbody>
    </table>


    <div class="d-flex justify-content-center">
        <button class="btn btn-light btn-lg btn-outline-dark" id="btn">go to signup</button>&nbsp;&nbsp;&nbsp;
        <button class="btn btn-light btn-lg btn-outline-dark" id="clearBtn">clear data</button>
    </div>

    <script>
        const tbody = document.querySelector("#dataBody");
        const data = JSON.parse(localStorage.getItem("users"));

        data?.map((user) => {
            const row = document.createElement("tr");
            const fname = document.createElement("td");
            fname.innerHTML = user.firstName;
            const lname = document.createElement("td");
            lname.innerHTML = user.lName;
            const phone = document.createElement("td");
            phone.innerHTML = user.contact;
            const email = document.createElement("td");
            email.innerHTML = user.email;
            const dob = document.createElement("td");
            dob.innerHTML = user.dob;
            const createdAt = document.createElement("td");
            createdAt.innerHTML = user.createdAt;
            const timeOfCreation = document.createElement("td");
            timeOfCreation.innerHTML = user.timeOfCreation;
            const deleteBtn = document.createElement("td");
            deleteBtn.classList.add('count');
            deleteBtn.style.cursor = 'pointer';
            deleteBtn.innerHTML = `<i class="fa-regular fa-2x text-danger fa-trash-can"></i>`;

            row.appendChild(fname);
            row.appendChild(lname);
            row.appendChild(email);
            row.appendChild(dob);
            row.appendChild(phone);
            row.appendChild(createdAt);
            row.appendChild(timeOfCreation);
            row.appendChild(deleteBtn);

            tbody.appendChild(row);

        })
        setTimeout(() => {
            let count = document.getElementsByClassName('count');
            Array.from(count).forEach((ele, index) => {
                ele.addEventListener("click", () => {
                    data.splice(index, 1);
                    localStorage.setItem("users", JSON.stringify(data));
                    window.location.href = "table.html"
                    console.log(data);
                })
            });

        }, 100);

        const btn = document.querySelector("#btn");
        btn.addEventListener("click", () => {
            window.location.href = "index.html"
        })


        const clearBtn = document.querySelector("#clearBtn");
        clearBtn.addEventListener("click", () => {
            localStorage.clear()
            window.location.href = "table.html"
        })



    </script>
</body>

</html>